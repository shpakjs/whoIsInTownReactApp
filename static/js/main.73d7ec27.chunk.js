(this["webpackJsonpwho-is-in-town-react-app"]=this["webpackJsonpwho-is-in-town-react-app"]||[]).push([[0],{13:function(e,t,n){e.exports={form:"styles_form__EYAxa",search:"styles_search__3WskD",button:"styles_button__2ZtO1"}},15:function(e,t,n){e.exports={info:"styles_info__2Yad2",image:"styles_image__2GrKo",name:"styles_name__24laJ"}},26:function(e,t,n){e.exports={emptyList:"styles_emptyList__2JVm5"}},27:function(e,t,n){e.exports={showMore:"styles_showMore__1ypF9"}},35:function(e,t,n){},5:function(e,t,n){e.exports={infoBlock:"styles_infoBlock__3gvtR",header:"styles_header__3SITa",date:"styles_date__2PkU6",text:"styles_text__3zifi"}},56:function(e,t,n){},57:function(e,t,n){"use strict";n.r(t);var a,c=n(1),s=n.n(c),i=n(25),r=n.n(i),o=(n(35),n(2)),l=n(26),u=n.n(l),d=n(0),j=function(e){var t,n=e.artist;return Object(d.jsxs)("div",{children:[Object(d.jsx)(b,Object(o.a)({},n)),(null===(t=n.events)||void 0===t?void 0:t.length)>0?Object(d.jsx)(U,{events:n.events}):Object(d.jsx)("span",{className:u.a.emptyList,children:" No events found :( "})]})},v=n(15),f=n.n(v),b=function(e){var t=e.thumb_url,n=e.name;return Object(d.jsxs)("div",{children:[Object(d.jsx)("img",{src:t,alt:"artist",className:f.a.image}),Object(d.jsx)("p",{className:f.a.name,children:n})]})},h=function(e){var t=e.filled,n=e.width,a=void 0===n?"15pt":n,c=e.height,s=void 0===c?"15pt":c;return Object(d.jsxs)("svg",{height:s,viewBox:"0 -10 511.98645 511",width:a,xmlns:"http://www.w3.org/2000/svg",children:[Object(d.jsx)("path",{d:"m499.574219 188.503906c-3.199219-9.921875-11.988281-16.9375-22.398438-17.898437l-141.355469-12.84375-55.894531-130.835938c-4.117187-9.578125-13.503906-15.765625-23.933593-15.765625-10.433594 0-19.820313 6.207032-23.9375 15.808594l-55.890626 130.816406-141.378906 12.839844c-10.386718.941406-19.175781 7.957031-22.378906 17.878906-3.21875 9.921875-.234375 20.777344 7.617188 27.648438l106.859374 93.695312-31.511718 138.773438c-2.300782 10.199218 1.664062 20.734375 10.136718 26.878906 4.519532 3.328125 9.875 4.992188 15.230469 4.992188 4.628907 0 9.238281-1.234376 13.355469-3.710938l121.898438-72.894531 121.875 72.875c8.917968 5.351562 20.160156 4.882812 28.609374-1.238281 8.46875-6.144532 12.4375-16.683594 10.132813-26.882813l-31.507813-138.769531 106.859376-93.699219c7.847656-6.867187 10.835937-17.726563 7.613281-27.667969zm0 0",fill:t?"#fdaf48":"#ffffff"}),Object(d.jsx)("path",{fill:"#fdaf48",d:"m114.617188 491.136719c-5.632813 0-11.203126-1.746094-15.957032-5.183594-8.855468-6.398437-12.992187-17.429687-10.582031-28.09375l32.9375-145.066406-111.703125-97.964844c-8.210938-7.1875-11.347656-18.515625-7.976562-28.90625 3.371093-10.367187 12.542968-17.726563 23.402343-18.730469l147.820313-13.417968 58.410156-136.746094c4.308594-10.046875 14.121094-16.535156 25.023438-16.535156 10.902343 0 20.714843 6.488281 25.023437 16.511718l58.410156 136.769532 147.796875 13.417968c10.882813.980469 20.054688 8.34375 23.425782 18.710938 3.371093 10.386718.253906 21.738281-7.980469 28.90625l-111.679688 97.941406 32.9375 145.066406c2.414063 10.667969-1.726562 21.695313-10.578125 28.09375-8.8125 6.378906-20.566406 6.914063-29.890625 1.324219l-127.464843-76.160156-127.445313 76.203125c-4.308594 2.582031-9.109375 3.859375-13.929687 3.859375zm141.375-112.871094c4.84375 0 9.640624 1.300781 13.953124 3.859375l120.277344 71.9375-31.085937-136.941406c-2.21875-9.769532 1.089843-19.925782 8.621093-26.515625l105.472657-92.523438-139.542969-12.671875c-10.003906-.894531-18.667969-7.1875-22.59375-16.46875l-55.101562-129.046875-55.148438 129.066407c-3.902344 9.238281-12.5625 15.53125-22.589844 16.429687l-139.519531 12.671875 105.46875 92.519531c7.554687 6.59375 10.839844 16.769531 8.621094 26.539063l-31.082031 136.941406 120.277343-71.9375c4.328125-2.558594 9.128907-3.859375 13.972657-3.859375zm-84.585938-221.824219v.019532zm169.152344-.066406v.023438s0 0 0-.023438zm0 0"})]})},O=function(e){return new Date(e).toLocaleDateString("en-GB",{year:"numeric",month:"2-digit",day:"2-digit"}).split("/").join(".")},_=n(7),p=n.n(_),x=function(e){var t=e.data,n=e.favourite,a=e.onEventClick,c=e.onStarClick;return Object(d.jsxs)("div",{onClick:function(){a&&a(t.id)},className:p.a.event,children:[n&&Object(d.jsxs)("div",{className:p.a.header,children:[Object(d.jsx)("div",{className:p.a.artist,children:t.lineup}),Object(d.jsx)("div",{onClick:function(){c&&c({id:t.id})},children:Object(d.jsx)(h,{filled:!0})})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{children:t.venue.name}),Object(d.jsx)("div",{className:p.a.location,children:"".concat(t.venue.city,", ").concat(t.venue.country)})]}),Object(d.jsx)("div",{className:p.a.date,children:O(t.datetime)})]})};!function(e){e.SET_ARTIST="SET_ARTIST",e.SET_EVENTS="SET_EVENTS",e.SELECT_EVENT="SELECT_EVENT",e.UPDATE_FAVOURITE="UPDATE_FAVOURITE",e.SET_FAVOURITES="SET_FAVOURITES"}(a||(a={}));var E=function(e){return{type:a.SET_ARTIST,payload:e}},m=function(e){return{type:a.SET_EVENTS,payload:e}},y=function(e){return{type:a.UPDATE_FAVOURITE,payload:e}},T=n(4),S=n(59),g=n(60),N=n(30),w=function(e,t){switch(t.type){case a.SET_ARTIST:return Object(o.a)(Object(o.a)({},e),{},{artist:t.payload,selectedEvent:void 0});case a.SET_EVENTS:return Object(o.a)(Object(o.a)({},e),{},{artist:Object(o.a)(Object(o.a)({},e.artist),{},{events:t.payload})});case a.SELECT_EVENT:return Object(o.a)(Object(o.a)({},e),{},{selectedEvent:function(t){var n,a;return null===(n=e.artist)||void 0===n||null===(a=n.events)||void 0===a?void 0:a.find((function(e){return e.id===t}))}(t.payload)});case a.UPDATE_FAVOURITE:var n;return n=e.favouriteEvents&&e.favouriteEvents.find((function(e){return e.id===t.payload.id}))?e.favouriteEvents.filter((function(e){return e.id!==t.payload.id})):[].concat(Object(N.a)(e.favouriteEvents||[]),[t.payload]),Object(o.a)(Object(o.a)({},e),{},{favouriteEvents:n});case a.SET_FAVOURITES:return Object(o.a)(Object(o.a)({},e),{},{favouriteEvents:t.payload});default:return e}},C=s.a.createContext({}),A=function(e){var t=e.children,n=Object(S.a)(["favourites"]),s=Object(T.a)(n,3),i=s[0],r=s[1],o=s[2],l=Object(c.useReducer)(w,{}),u=Object(T.a)(l,2),j=u[0],v=u[1];return Object(c.useEffect)((function(){j.favouriteEvents?r("favourites",j.favouriteEvents):o("favourites")}),[j.favouriteEvents]),Object(c.useEffect)((function(){window.dataLayer=window.dataLayer||[],window.dataLayer.push({merchantType:"omnichannel",user_id:"10"});var e,t=i.favourites;t&&v((e=t,{type:a.SET_FAVOURITES,payload:e}))}),[]),Object(d.jsx)(g.a,{children:Object(d.jsx)(C.Provider,{value:{state:j,dispatch:v},children:t})})},k=n(5),V=n.n(k),I=function(){var e=Object(c.useContext)(C),t=e.dispatch,n=e.state,a=n.favouriteEvents,s=n.selectedEvent,i=s.id,r=s.datetime,o=s.description,l=s.venue,u=s.offers,j=s.lineup,v=s.url,f=null===a||void 0===a?void 0:a.some((function(e){return e.id===i}));return Object(d.jsx)("div",{className:V.a.card,children:s&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("div",{className:V.a.infoBlock,children:[Object(d.jsxs)("div",{onClick:function(){t(y({id:i,datetime:r,lineup:j,venue:l}))},className:V.a.header,children:[Object(d.jsx)("div",{className:V.a.date,children:O(r)}),Object(d.jsx)(h,{filled:f,width:"30px",height:"30px"})]}),Object(d.jsx)("div",{children:l.name}),Object(d.jsx)("div",{children:"".concat(l.city,", ").concat(l.country)})]}),Object(d.jsx)("div",{className:V.a.infoBlock,children:Object(d.jsx)("p",{className:V.a.text,children:o})}),Object(d.jsx)("div",{className:V.a.infoBlock,children:u.map((function(e){return Object(d.jsx)("a",{href:e.url,children:e.type})}))}),Object(d.jsxs)("p",{children:["See more details ",Object(d.jsx)("a",{href:v,children:"here"})]})]})})},R=n(27),F=n.n(R),U=function(e){var t=e.events,n=Object(c.useState)(6),s=Object(T.a)(n,2),i=s[0],r=s[1],o=Object(c.useContext)(C).dispatch,l=function(e){o(function(e){return{type:a.SELECT_EVENT,payload:e}}(e))},u=t.length-i>0;return Object(d.jsxs)("div",{children:["Events",t.slice(0,i).map((function(e){return Object(d.jsx)(x,{data:e,onEventClick:l},e.id)})),u&&Object(d.jsx)("button",{className:F.a.showMore,onClick:function(){return r((function(e){return e+6}))},children:"Show more"})]})},L=function(){var e=Object(c.useContext)(C),t=e.dispatch,n=e.state.favouriteEvents,a=function(e){t(y(e))};return Object(d.jsxs)("div",{children:[Object(d.jsx)("header",{children:"Favourite events"}),n.map((function(e){return Object(d.jsx)(x,{data:e,favourite:!0,onStarClick:a},e.id)}))]})},B=n(9),D=n.n(B),P=function(){var e=Object(c.useContext)(C).state;return Object(d.jsxs)("div",{className:D.a.content,children:[Object(d.jsx)("div",{className:D.a.band,children:e.artist&&Object(d.jsx)(j,{artist:e.artist})}),Object(d.jsx)("div",{className:D.a.event,children:e.selectedEvent&&Object(d.jsx)(I,{})}),Object(d.jsx)("div",{className:D.a.favourites,children:e.favouriteEvents&&e.favouriteEvents.length>0&&Object(d.jsx)(L,{})})]})},z=n(16),J=n.n(z),G=n(28),K=n(29),M="app_id=123",Y={getArtist:function(e){return"artists/".concat(e,"?").concat(M)},getArtistEvents:function(e){return"artists/".concat(e,"/events?").concat(M)}},q=n.n(K).a.create({baseURL:"https://rest.bandsintown.com/"}),H={getArtist:function(e){return q.get(Y.getArtist(e))},getArtistEvents:function(e){return q.get(Y.getArtistEvents(e))}},Q=function(){var e=Object(c.useState)(""),t=Object(T.a)(e,2),n=t[0],a=t[1],s=Object(c.useContext)(C).dispatch,i=Object(c.useCallback)((function(e){a(e.target.value)}),[]),r=Object(c.useCallback)(function(){var e=Object(G.a)(J.a.mark((function e(t){var a,c,i,r;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,Promise.all([H.getArtist(n),H.getArtistEvents(n)]);case 4:a=e.sent,c=Object(T.a)(a,2),i=c[0],r=c[1],s(E(i.data)),s(m(r.data)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),[n,s]);return{searchVal:n,onSearchChange:i,applySearch:r}},W=n(13),Z=n.n(W),X=function(){var e=Q(),t=e.searchVal,n=e.onSearchChange,a=e.applySearch;return Object(d.jsxs)("form",{className:Z.a.form,onSubmit:a,children:[Object(d.jsx)("input",{className:Z.a.search,placeholder:"Enter artist name",value:t,onChange:n}),Object(d.jsx)("button",{type:"submit",disabled:!t,className:Z.a.button,children:"SEARCH"})]})};n(56);var $=function(){return Object(d.jsx)("div",{className:"app",children:Object(d.jsxs)(A,{children:[Object(d.jsx)(X,{}),Object(d.jsx)(P,{})]})})},ee=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,61)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),s(e),i(e)}))};r.a.render(Object(d.jsx)(s.a.StrictMode,{children:Object(d.jsx)($,{})}),document.getElementById("root")),ee()},7:function(e,t,n){e.exports={event:"styles_event__1zIJN",date:"styles_date__29zVs",location:"styles_location__yUG-Q",header:"styles_header__1cKk_",artist:"styles_artist__2ketv"}},9:function(e,t,n){e.exports={content:"styles_content__1Ggw0",band:"styles_band__1N99K",event:"styles_event__1mqtn",favourites:"styles_favourites__hlKwu"}}},[[57,1,2]]]);
//# sourceMappingURL=main.73d7ec27.chunk.js.map